<?php
include_once( "../../global.php" );
$user_name = $_GET['user_name'];
$user_id = $_GET['user_id'];
$db = new action( $mydbhost, $mydbuser, $mydbpw, $mydbname, ALL_PS, $mydbcharset );
$query = $db->select( "login_code", "*", "user_id={$user_id} limit 0,50" );
echo "<html oncontextmenu=\"return false\" xmlns=\"http://www.w3.org/1999/xhtml\">\n<head>\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\">\n<link href=\"../images/Index.css\" rel=\"stylesheet\" type=\"text/css\">\n</head>\n\n<body oncontextmenu=\"return false\" onselect=\"document.selection.empty()\" oncopy=\"document.selection.empty()\" onmouseover=\"self.status='歡迎光臨';return true\">\n\n<div id=\"ly\" style=\"posit";
echo "ion: absolute; top: 0px; background-color: rgb(255, 255, 255); z-index: 2; left: 0px; display: block; width: 1337px; height: 513px;\"> \n  <!--[if lte IE 6.5]><iframe></iframe><![endif]--> \n</div>\n<!--          浮層框架開始         -->\n<div id=\"rs_window\" style=\"position: absolute; top: 25px; z-index: 2000; left: 277px; display: block;\">\n  \n  <table bgcolor=\"#FFFFFF\" border=\"0\" cellpadding=\"0\" cellspacing=\"";
echo "0\">\n    <tbody>\n      <tr>\n        <td background=\"../images/tab_05.gif\" height=\"30\"><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\">\n            <tbody>\n              <tr>\n                <td height=\"30\" width=\"12\"><img src=\"../images/tab_03.gif\" height=\"30\" width=\"12\"></td>\n                <td><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\">\n                    <tbody>\n        ";
echo "              <tr>\n                        <td valign=\"middle\"><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\">\n                            <tbody>\n                              <tr>\n                                <td width=\"2%\"><div align=\"center\"><img src=\"../images/tb.gif\" height=\"16\" width=\"16\"></div></td>\n                                <td class=\"F_bold\" width=\"70%\">[";
echo $user_name;
echo "]登陸日誌</td>\n                                <td class=\"F_bold\" align=\"right\"><a href=\"javascript:history.back(-1)\"><img src=\"../images/icon_21x21_del.gif\" border=\"0\" height=\"16\" width=\"16\"></a></td>\n                              </tr>\n                            </tbody>\n                          </table></td>\n                      </tr>\n                    </tbody>\n                  </table></td>\n          ";
echo "      <td width=\"16\"><img src=\"../images/tab_07.gif\" height=\"30\" width=\"16\"></td>\n              </tr>\n            </tbody>\n          </table></td>\n      </tr>\n      <tr>\n        <td><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\">\n            <tbody>\n              <tr>\n                <td background=\"../images/tab_12.gif\" width=\"8\">&nbsp;</td>\n                <td align=\"center\"><!-- 開始  -->\n      ";
echo "            \n                  <div id=\"rs_windowss\">\n                    <table class=\"t_list\" border=\"0\" cellpadding=\"1\" cellspacing=\"1\" width=\"785\">\n                      <tbody>\n                        <tr>\n                          <td class=\"t_list_caption\">ID</td>\n                          <td class=\"t_list_caption\">登陸時間</td>\n                          <td class=\"t_list_caption\">IP</td>\n          ";
echo "                <td class=\"t_list_caption\">IP歸屬</td>\n                        </tr>\n                          ";
while ( $row = $db->fetch_array( $query ) )
{
		echo "                            \n                       \n                        <tr class=\"t_list_tr_0\" onmouseover=\"this.style.backgroundColor='#FFFFA2'\" onmouseout=\"this.style.backgroundColor=''\">\n                          <td>";
		echo $row['id'];
		echo "</td>\n                          <td>";
		echo $row['login_time'];
		echo "</td>\n                          <td>";
		echo $row['login_ip'];
		echo "</td>\n                          <td>";
		echo $row['login_location'];
		echo "</td>\n                        </tr>\n                              ";
}
echo "                        <tr class=\"t_list_tr_0\" onmouseover=\"this.style.backgroundColor='#FFFFA2'\" onmouseout=\"this.style.backgroundColor=''\">\n                          <td colspan=\"4\"><a href=\"javascript:history.back(-1)\"><input name=\"cancel\" onclick=\"javascript:history.back(-1)\" value=\"取消\" class=\"btn2\" onmouseover=\"this.className='btn2m'\" onmouseout=\"this.className='btn2'\" type=\"button\"></a></td>\n  ";
echo "                      </tr>\n                      </tbody>\n                    </table>\n                  </div>\n                  \n                  <!-- 結束  --></td>\n                <td background=\"../images/tab_15.gif\" width=\"8\">&nbsp;</td>\n              </tr>\n            </tbody>\n          </table></td>\n      </tr>\n      <tr>\n        <td background=\"../images/tab_19.gif\" height=\"35\"><table border=\"0\" cellpa";
echo "dding=\"0\" cellspacing=\"0\" width=\"100%\">\n            <tbody>\n              <tr>\n                <td height=\"35\" width=\"12\"><img src=\"../images/tab_18.gif\" height=\"35\" width=\"12\"></td>\n                <td valign=\"top\"><table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" height=\"30\" width=\"100%\">\n                    <tbody>\n                      <tr>\n                        <td align=\"center\"><table bordercolordar";
echo "k=\"#FFFFFF\" align=\"center\" border=\"0\" bordercolor=\"f1f1f1\" cellpadding=\"2\" cellspacing=\"0\" width=\"99%\">\n                            <tbody>\n                              <tr>\n                                <td align=\"center\">註意：登陸日誌最少被保畱7天、超過7天部分最多保留最後50筆。</td>\n                              </tr>\n                            </tbody>\n                          </table></td>\n     ";
echo "                 </tr>\n                    </tbody>\n                  </table></td>\n                <td width=\"16\"><img src=\"../images/tab_20.gif\" height=\"35\" width=\"16\"></td>\n              </tr>\n            </tbody>\n          </table></td>\n      </tr>\n    </tbody>\n  </table>\n</div>\n";
echo "<s";
echo "cript language=\"javascript\">\n\n//開始\nfunction createRequest() {\n  try {\n    s_request = new XMLHttpRequest();\n  } catch (trymicrosoft) {\n    try {\n      s_request = new ActiveXObject(\"Msxml2.XMLHTTP\");\n    } catch (othermicrosoft) {\n      try {\n        s_request = new ActiveXObject(\"Microsoft.XMLHTTP\");\n      } catch (failed) {\n        s_request = false;\n      }\n    }\n  }\n  if (!s_request)\n    ale";
echo "rt(\"初始化XMLHttpRequest對象失敗!\");\n}\n\nfunction GetValue(id,type,url,wh,hi)\n{\n\tvar url = \"?spul=\"+url+\"&id=\"+id+\"&type=\"+type;\n\ts_request.open(\"GET\",url,false);\n\ts_request.onreadystatechange = function()\n\t{\n\t\tif (s_request.readyState==4)\n \t\t{\n\t\t\tif(s_request.status==200)\n\t\t\t{\n\t\t\n \t\t\t\ts_db_res = unescape(s_request.responseText);\n\t\t\n\t\t\t}\n  \t\t}\n\n \t}\n\ts_request.send(null);\n}\n\n\nfunction show_win(id,ty";
echo "pe,url,wh,hi) {\nvar rs_window=document.getElementById(\"rs_window\"); \nrs_window.style.display=\"block\";\n//以下部分要將彈出層居中顯示\nvar vv=(document.body.clientWidth-wh)/2;\nif (vv<0){vv=0;}\nrs_window.style.left=vv+\"px\"; \nrs_window.style.top=hi+\"px\";\n//以下部分實現彈出層的拖拽效果\n///var posX;\n///var posY;\n//rs_window.onmousedown=function(e)\n///{\n///if(!e) e = window.event; //IE\n///posX = e.clientX -";
echo " parseInt(rs_window.style.left);\n///posY = e.clientY - parseInt(rs_window.style.top);\n///document.onmousemove = mousemove; \n///}\n///document.onmouseup =function()\n///{\n///document.onmousemove =null;\n///}\n///function mousemove(ev)\n///{\n///if(ev==null) ev = window.event;//IE\n///rs_window.style.left = (ev.clientX - posX) +\"px\";\n///rs_window.style.top = (ev.clientY - posY) +\"px\";\n///}\n\ncreateRequest()";
echo ";\nGetValue(id,type,url,wh,hi);\ndocument.all.rs_window.innerHTML=s_db_res;\t\nif (hi==26){To_RMB();}\ndocument.all.ly.style.display=\"block\";\ndocument.all.ly.style.width=document.body.clientWidth;\ndocument.all.ly.style.height=document.body.clientHeight;\n}\n\n\n\nfunction close_win() {\n\tdocument.all[\"rs_window\"].style.display = \"none\";\n\tdocument.all.ly.style.display='none';\n}\nfunction cl_win() {\n\tdocument.g";
echo "etElementById('Submit').disabled = false;\n}\n//會員\nfunction GetValue1(s_s)\n{\n\tvar url = \"?spul=DmIAXANlUnAFMw1qATYOeg!888!888&s_id=\"+s_s+\"&randnum=\"+Math.random();\n\ts_request.open(\"GET\",url,false);\n\ts_request.onreadystatechange = function()\n\t{\n\t\tif (s_request.readyState==4)\n \t\t{\n\t\t\tif(s_request.status==200)\n\t\t\t{\n \t\t\t\ts_db_res = unescape(s_request.responseText);\n\t\t\t}\n  \t\t}\n \t}\n\ts_request.send(null)";
echo ";\n}\nfunction SendFindVN() {\n\tif(document.all.kauser.value.length < 2){\n\t\tdocument.getElementById(\"Find_Return\").className=\"Font_R\";\n\t\tdocument.getElementById(\"Find_Return\").innerHTML=\"帳號最小長度必須 2位 或以上！\";\n\t\tdocument.getElementById('Submit').disabled = true;\n\t\tdocument.all.kauser.focus();\n\t\treturn false;\n\t}\n\ttry {\n\t\n\t\tvar s_num = document.all.kauser.value;\n\t\t\tcreateRequest();\n\t\t\t//alert(i";
echo ");\n\t\t\tGetValue1(s_num);\n\t\t\t//alert(\"数據庫返回的賠率是:\"+s_db_res);\n\t\t\t\n\t\t\t var arrResult = s_db_res.split(\"###\");\t\n\t\t\t\n\t\t\tif(arrResult[1]==\"yes\")\n\t\t\t{\n\t\t\t\tdocument.getElementById(\"Find_Return\").className=\"Font_Y\";\n\t\t\t\tdocument.getElementById(\"Find_Return\").innerHTML=\"選擇帳號已被占用，不可用！！！\";\n\t\t\t\tdocument.getElementById('Submit').disabled = true;\n\t\t\t\tdocument.all.kauser.focus();\n\t\t\t}else{\n";
echo "\t\t\t\tdocument.getElementById(\"Find_Return\").className=\"\";\n\t\t\t\tdocument.getElementById(\"Find_Return\").innerHTML=\"選擇帳號可用！！！\";\n\t\t\t\tdocument.getElementById('Submit').disabled = false;\t\t\t\n\t\t\t}\n\t\t\t\n\t} catch (e){}\n}\n\n//信用額\nfunction To_RMB()\n{\nvar whole = document.all.cs.value;\n\n//分離整数與小数\nvar num;\nvar dig;\nif(whole.indexOf(\".\") == -1)\n{\nnum = whole;\ndig = \"\";\n}\nelse\n{\nnum = whole.substr(";
echo "0,whole.indexOf(\".\"));\ndig = whole.substr( whole.indexOf(\".\")+1, whole.length);\n}\n\n//轉換整数部分\nvar i=1;\nvar len = num.length;\n\nvar dw2 = new Array(\"\",\"萬\",\"億\");//大单位\nvar dw1 = new Array(\"十\",\"百\",\"千\");//小单位\nvar dw = new Array(\"\",\"一\",\"二\",\"三\",\"四\",\"五\",\"六\",\"七\",\"八\",\"九\");//整数部分用\nvar k1=0;//計小单位\nvar k2=0;//計大单位\nvar str=\"\";\n\nfor(i=1;i<=len;i++)\n{\nvar n = num.charAt(len-i);\n";
echo "if(n==\"0\")\n{\nif(k1!=0)\nstr = str.substr( 1, str.length-1);\n}\n\nstr = dw[Number(n)].concat(str);//加数字\n\nif(len-i-1>=0)//在数字範圍內\n{\nif(k1!=3)//加小单位\n{\nstr = dw1[k1].concat(str);\nk1++;\n}\nelse//不加小单位，加大单位\n{\nk1=0;\nvar temp = str.charAt(0);\nif(temp==\"萬\" || temp==\"億\")//若大单位前沒有数字則舍去大单位\nstr = str.substr( 1, str.length-1);\nstr = dw2[k2].concat(str);\n}\n}\n\n\nif(k1==3)//小单位";
echo "到千則大单位進一\n{\nk2++;\n}\n}\nif (str.length>=2){\n    if (str.substr(0,2)==\"一十\") str=str.substr(1, str.length-1);\n}\ndocument.getElementById(\"RMB_XY\").innerHTML = str;\n}\n\nfunction CountGold(gold,type,rtype){\ngoldvalue = gold.value;\nstr1=\"kyx\";\nzmzm=document.all[str1].value;\nif (goldvalue=='') goldvalue=0;\nif (rtype=='SP' && (eval(goldvalue) > eval(zmzm))) {gold.focus(); gold.value=eval(zmzm); aler";
echo "t(\"對不起,總信用額度最高限制 : \"+eval(zmzm)+\"!!\"); return false;}\n}\nfunction cc(jmpURL){ \n\nvar fc1=eval(document.all.fc2.value);\nvar cc =fc1-jmpURL;\ndocument.all.c1.value=jmpURL; \nvar cc1=document.all.c2.value;\nvar o = document.all[\"sf\"];\ndocument.getElementById(\"sf\").options.length=0;\nfor(var i=0;i<=cc;i=i+1){\nif (i==0){o.options.add(new Option('不占成',i)); }else{\no.options.add(new Option(i+'%',i";
echo ")); }\n\n}\n\t  var o = document.all.sf;\n  if(o.length!=0){\n   for(var i = 0; i < o.length; i++){\n    if(o[i].value==cc1){\n     o[i].selected = true;\n    }\n   }}\n} \nfunction cc1(jmpURL){ \nvar fc1=eval(document.all.fc2.value);\nvar cc =fc1-jmpURL;\ndocument.all.c2.value=jmpURL; \nvar cc1=document.all.c1.value;\nvar o = document.all[\"sj\"];\ndocument.getElementById(\"sj\").options.length=0;\nfor(var i=0;i<=cc;i=i+";
echo "1){\nif (i==0){o.options.add(new Option('不占成',i)); }else{\no.options.add(new Option(i+'%',i)); }\n\n}\n\t  var o = document.all.sj;\n  if(o.length!=0){\n   for(var i = 0; i < o.length; i++){\n    if(o[i].value==cc1){\n     o[i].selected = true;\n    }\n   }}\n  \n   \n} \nfunction SubChk()\n{\n\nif(document.all.type1.value>=2){\nif(document.all.temppid.value=='')\n \t\t{ document.all.temppid.focus(); alert(\"請選擇上級";
echo "!!\"); return false; }\n}\n\n\nif(document.all.kapassword.value=='')\n{ document.all.kapassword.focus(); alert(\"密码請務必輸入!!\"); return false; }\n\t\tif(document.all.xm.value=='')\n{ document.all.xm.focus(); alert(\"名稱請務必輸入!!\"); return false; }\n \tif(document.all.kauser.value=='')\n \t\t{ document.all.alias.focus(); alert(\"用戶名請務必輸入!!\"); return false; }\n  \tif(document.all.cs.value=='')\n\t\t{ docum";
echo "ent.all.cs.focus(); alert(\"總信用額度請務必輸入!!\"); return false; }\n\n\tdocument.getElementById('Submit').disabled = true;\t\n\tif(!confirm(\"是否確定新增用戶?\")){\n\tdocument.getElementById('Submit').disabled = false;\t\n  \t\treturn false;\n \t}\n}\n\n\n\nfunction SubChkedit()\n{\n\n \n\n \n\t\tif(document.all.xm.value=='')\n{ document.all.xm.focus(); alert(\"名稱請務必輸入!!\"); return false; }\n \t \n  \tif(document.all.cs.va";
echo "lue=='')\n\t\t{ document.all.cs.focus(); alert(\"總信用額度請務必輸入!!\"); return false; }\n\n\tdocument.getElementById('Submit').disabled = true;\t\n\t \n}\n\n///abcd\nfunction MM_findObj(n, d) { //v4.01\n  var p,i,x;  if(!d) d=document; if((p=n.indexOf(\"?\"))>0&&parent.frames.length) {\n    d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}\n  if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.l";
echo "ength;i++) x=d.forms[i][n];\n  for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document);\n  if(!x && d.getElementById) x=d.getElementById(n); return x;\n}\n\nfunction MM_changeProp(objName,x,theProp,theValue) { //v6.0\n  var obj = MM_findObj(objName);\n  if (obj && (theProp.indexOf(\"style.\")==-1 || obj.style)){\n    if (theValue == true || theValue == false)\n      eval(\"obj.\"+thePr";
echo "op+\"=\"+theValue);\n    else eval(\"obj.\"+theProp+\"='\"+theValue+\"'\");\n  }\n}\n\nfunction MM_validateForm() { //v4.0\n  var i,p,q,nm,test,num,min,max,errors='',args=MM_validateForm.arguments;\n  for (i=0; i<(args.length-2); i+=3) { test=args[i+2]; val=MM_findObj(args[i]);\n    if (val) { nm=val.name; if ((val=val.value)!=\"\") {\n      if (test.indexOf('isEmail')!=-1) { p=val.indexOf('@');\n        if (p<1 || p==";
echo "(val.length-1)) errors+='- '+nm+' must contain an e-mail address.\\n';\n      } else if (test!='R') { num = parseFloat(val);\n        if (isNaN(val)) errors+='- '+nm+' must contain a number.\\n';\n        if (test.indexOf('inRange') != -1) { p=test.indexOf(':');\n          min=test.substring(8,p); max=test.substring(p+1);\n          if (num<min || max<num) errors+='- '+nm+' must contain a number between '+";
echo "min+' and '+max+'.\\n';\n    } } } else if (test.charAt(0) == 'R') errors += '- '+nm+' is required.\\n'; }\n  } if (errors) alert('The following error(s) occurred:\\n'+errors);\n  document.MM_returnValue = (errors == '');\n}\n///abcd\nfunction CheckKey11(){\n\tif(event.keyCode == 13) return true;\n\tif((event.keyCode < 46 || event.keyCode > 57 || event.keyCode ==47) && (event.keyCode > 95 || event.keyCode < 106)";
echo "){alert(\"僅能輸入数字!!\"); return false;}\n}\n///會員\n\n////退水\nfunction SubChkds()\n{\ndocument.getElementById('Submit').disabled = true;\t\n}\nfunction CountGoldS1(gold,type,rtype,bb,nmnm){\n\ngoldvalue = gold.value;\n\n\nif (goldvalue=='') goldvalue=0;\n\nif (rtype=='SP' && (eval(goldvalue) > eval(bb))) {gold.focus(); gold.value=eval(bb);alert(\"對不起,止項最高不能超過上級限額: \"+eval(bb)+\"!!\"); \nreturn false";
echo ";\n}\n\nif (rtype=='TP' && (eval(goldvalue) < eval(bb))) {gold.focus();gold.value=eval(bb); alert(\"對不起,止項最低不能低過上級限額: \"+eval(bb)+\"!!\"); \nreturn false;\n}\n\nif (rtype=='XP' && (eval(goldvalue) > eval(bb))) {gold.focus();gold.value=eval(bb); alert(\"對不起,止項最高不能超過上級限額: \"+eval(bb)+\"!!\"); \nreturn false;\n}\n\nif (rtype=='MP' && (eval(goldvalue) > eval(bb))) {gold.focus(); gold.value=e";
echo "val(bb);alert(\"對不起,止項最高不能超過上級限額: \"+eval(bb)+\"!!\"); \nreturn false;\n}\n\nfor(i=1; i<=41 ;i++)\n\t{\n\tif (nmnm==i){\nvar str1=\"mm\"+i;\nvar str2=\"mmm\"+i;\nvar t_big2 = new Number(document.all[str2].value);\nif (rtype=='MP' && (eval(goldvalue) > eval(t_big2))) {gold.focus(); gold.value=eval(t_big2);alert(\"對不起,单註限額不能大於单項限額: \"+eval(t_big2)+\"!!\"); \nreturn false;}\n\nvar t_big = new Numbe";
echo "r(document.all[str1].value);\nif (rtype=='XP' && (eval(goldvalue) < eval(t_big))) {gold.focus(); gold.value=eval(t_big);alert(\"對不起,单項限額不能低於单註限額: \"+eval(t_big)+\"!!\"); \nreturn false;\n}\n}\n}\n}\n\n////退水\n//////修改//////\nfunction CountGoldedit(gold,type,rtype){\ngoldvalue = gold.value;\nstr1=\"kyx\";\nzmzm=document.all[str1].value;\nif (goldvalue=='') goldvalue=0;\nif (rtype=='SP' && (eval(goldva";
echo "lue) > eval(zmzm))) {gold.focus();gold.value=eval(zmzm); alert(\"對不起,總信用額度最高限制 : \"+eval(zmzm)+\"!!\"); return false;}\nif (rtype=='SP' && (eval(goldvalue) < document.all.cs1.value)) {gold.focus();gold.value=document.all.cs1.value; alert(\"對不起,總信用額度最低限制 : \"+document.all.cs1.value+\"!!\"); return false;}\n}\n\nfunction ccw(jmpURL){ \n\nvar fc2=eval(document.all.fc2.value);\nvar fc1=eval(do";
echo "cument.all.fc1.value);\nvar cc=fc2-jmpURL;\n\ndocument.all.c1.value=jmpURL; \nvar cc1=document.all.c2.value;\nvar o = document.all[\"sf\"];\ndocument.getElementById(\"sf\").options.length=0;\nfor(var i=fc1;i<=cc;i=i+1){\n\nif (i==0){o.options.add(new Option('不占成',i)); }else{\no.options.add(new Option(i+'%',i)); }\n\n}\n\t  var o = document.all.sf;\n  if(o.length!=0){\n   for(var i = 0; i < o.length; i++){\n    if(o[i";
echo "].value==cc1){\n     o[i].selected = true;\n    }\n   }}\n} \nfunction ccw1(jmpURL){ \nvar fc2=eval(document.all.fc2.value);\nvar fc1=eval(document.all.fc1.value);\nvar cc =fc2-jmpURL;\ndocument.all.c2.value=jmpURL; \nvar cc1=document.all.c1.value;\nvar o = document.all[\"sj\"];\ndocument.getElementById(\"sj\").options.length=0;\nfor(var i=0;i<=cc;i=i+1){\nif (i==0){o.options.add(new Option('不占成',i)); }else{\no.op";
echo "tions.add(new Option(i+'%',i)); }\n\n}\n\t  var o = document.all.sj;\n  if(o.length!=0){\n   for(var i = 0; i < o.length; i++){\n    if(o[i].value==cc1){\n     o[i].selected = true;\n    }\n   }}\n  \n   \n} \n\n//////修改//////\n</script>\n</body>\n</html>";
?>
